<html>
  <head>
    <title>User</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="/css/home.css" />
  </head>

  <body>
    <div class="header">
      <h2>Welcome <%= name %></h2>
      <div class="header-buttons">
        <button id="profile-btn">Profile</button>
        <button id="view-orders">View Orders</button>
        <button id="logout-btn">Logout</button>
      </div>
    </div>

    <div class="page-wrapper">

      <div class="left-section">

        <div class="search-container">
          <form action="/home" method="GET" class="search-form">
            <input
              type="text"
              name="category"
              placeholder="Search by category..."
              value="<%= searchCategory %>"
            />
            <button type="submit">Search</button>
            <a href="/home" class="view-all-btn">View All Products</a>
          </form>
        </div>

        <div class="product-grid">
          <% Object.keys(products).forEach((cat) => { %>
            <% products[cat].forEach((product) => { %>

              <div class="product-card" data-id="<%= product._id %>">
                <img src="/uploads/<%= product.imagePath %>" />

                <h3><%= product.name %></h3>

                <p><strong>Category:</strong> <%= cat %></p>
                <p><strong>Price:</strong> â‚¹<%= product.price %></p>
                <p><strong>Qty:</strong> <%= product.quantity %></p>

                <p class="description"><%= product.description %></p>

                <button class="add-to-cart">Add to Cart</button>
                <button class="buy-now">Buy Now</button>
              </div>

            <% }) %>
          <% }) %>
        </div>
      </div>

      <div class="right-section">
        <button id="view-cart" class="cart-btn">View Cart</button>
        <div id="cart-container"></div>
      </div>

    </div>

    <script src="/jsExpress/home.js"></script>

    <script>
      window.currentEmail = "<%= email %>";
    </script>
  </body>
</html>
